å…«å°æ—¶è¶…é•¿è§†é¢‘æ•™ä½ æŒæ¡FPGAæ—¶åºçº¦æŸ
==

Original post: <https://my.oschina.net/u/4583591/blog/4455472>{:target="_blank"}

> å®Œæ•´è§†é¢‘é“¾æ¥ï¼š
é“¾æ¥: <https://pan.baidu.com/s/1AXvJKXzFjahE5ZLa4pE_8w >{:target="_blank"}  
æå–ç : y6ud 

# 1. æ—¶åºåˆ†æåŸºç¡€çŸ¥è¯†

## 1.1 ä»€ä¹ˆæ˜¯æ—¶åºåˆ†æï¼Ÿ

æ—¶åºåˆ†ææœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æ—¶åºæ£€æŸ¥ï¼Œç›®çš„æ˜¯æ£€æŸ¥è®¾è®¡ä¸­æ‰€æœ‰çš„Dè§¦å‘å™¨æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä¹Ÿå°±æ˜¯æ£€æŸ¥Dè§¦å‘å™¨çš„åŒæ­¥ç«¯å£ï¼ˆæ•°æ®è¾“å…¥ç«¯å£ï¼‰çš„å˜åŒ–æ˜¯å¦æ»¡è¶³å»ºç«‹æ—¶é—´è¦æ±‚ï¼ˆSetupï¼‰å’Œä¿æŒæ—¶é—´è¦æ±‚ï¼ˆHoldï¼‰ï¼›æ£€æŸ¥Dè§¦å‘å™¨çš„å¼‚æ­¥ç«¯å£ï¼ˆå¼‚æ­¥å¤ä½ç«¯å£ï¼‰çš„å˜åŒ–æ˜¯å¦æ»¡è¶³æ¢å¤æ—¶é—´è¦æ±‚ï¼ˆRecoveryï¼‰å’Œç§»é™¤æ—¶é—´è¦æ±‚ï¼ˆRemovalï¼‰ã€‚

[^_^]:
    ![](https://upload-images.jianshu.io/upload_images/16278820-f261f3a949a50e1a.png)

![](1.png)

## 1.2 æ—¶åºåˆ†ææœ‰å“ªäº›ç±»å‹ï¼Ÿ

æ—¶åºåˆ†æåŒ…æ‹¬é™æ€æ—¶åºåˆ†æï¼ˆSTAï¼‰å’ŒåŠ¨æ€æ—¶åºåˆ†æã€‚

- åŠ¨æ€æ—¶åºåˆ†æï¼šå°†å¸ƒå±€å¸ƒçº¿ç”Ÿæˆçš„å¸ƒçº¿å»¶è¿Ÿä¿¡æ¯åæ ‡æ³¨åˆ°é—¨çº§ç½‘è¡¨ä¸­è¿›è¡Œä»¿çœŸï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨æ—¶åºè¿ä¾‹ã€‚æ­¤æ—¶çš„ä»¿çœŸåŒ…æ‹¬é—¨å»¶è¿Ÿå’Œå¸ƒçº¿å»¶è¿Ÿä¿¡æ¯ï¼Œèƒ½å¤Ÿè¾ƒå¥½ååº”èŠ¯ç‰‡çš„å®é™…å·¥ä½œæƒ…å†µã€‚å› ä¸ºä¸å¯èƒ½äº§ç”Ÿå®Œå¤‡çš„æµ‹è¯•å‘é‡ï¼Œè¦†ç›–é—¨çº§ç½‘è¡¨ä¸­çš„æ¯ä¸€æ¡è·¯å¾„ã€‚å› æ­¤åœ¨åŠ¨æ€æ—¶åºåˆ†æä¸­ï¼Œæ— æ³•æš´éœ²ä¸€äº›è·¯å¾„ä¸Šå¯èƒ½å­˜åœ¨çš„æ—¶åºé—®é¢˜ã€‚

- é™æ€æ—¶åºåˆ†æï¼šé‡‡ç”¨ç©·å°½åˆ†ææ–¹æ³•æ¥æå–å‡ºæ•´ä¸ªç”µè·¯å­˜åœ¨çš„æ‰€æœ‰æ—¶åºè·¯å¾„ï¼Œè®¡ç®—ä¿¡å·åœ¨è¿™äº›è·¯å¾„ä¸Šçš„ä¼ æ’­å»¶æ—¶ï¼Œæ£€æŸ¥ä¿¡å·çš„å»ºç«‹å’Œä¿æŒæ—¶é—´æ˜¯å¦æ»¡è¶³æ—¶åºè¦æ±‚ï¼Œé€šè¿‡å¯¹æœ€å¤§è·¯å¾„å»¶æ—¶å’Œæœ€å°è·¯å¾„å»¶æ—¶çš„åˆ†æï¼Œæ‰¾å‡ºè¿èƒŒæ—¶åºçº¦æŸçš„é”™è¯¯ã€‚å®ƒä¸éœ€è¦è¾“å…¥å‘é‡å°±èƒ½ç©·å°½æ‰€æœ‰çš„è·¯å¾„ï¼Œä¸”è¿è¡Œé€Ÿåº¦å¾ˆå¿«ã€å ç”¨å†…å­˜è¾ƒå°‘ï¼Œä¸ä»…å¯ä»¥å¯¹èŠ¯ç‰‡è®¾è®¡è¿›è¡Œå…¨é¢çš„æ—¶åºåŠŸèƒ½æ£€æŸ¥ï¼Œè€Œä¸”è¿˜å¯åˆ©ç”¨æ—¶åºåˆ†æçš„ç»“æœæ¥ä¼˜åŒ–è®¾è®¡ï¼Œå› æ­¤é™æ€æ—¶åºåˆ†æå·²ç»è¶Šæ¥è¶Šå¤šåœ°è¢«ç”¨åˆ°æ•°å­—é›†æˆç”µè·¯è®¾è®¡çš„éªŒè¯ä¸­ã€‚

## 1.3 æ—¶åºåˆ†æä½¿ç”¨çš„å·¥å…·æœ‰å“ªäº›ï¼Ÿ

é™æ€æ—¶åºåˆ†æä½¿ç”¨çš„å·¥å…·ï¼š

- Xilinx Vivado Intergreated Design Environment Time Engine
- Altera Quartus II Timequest
- DCç­‰

åŠ¨æ€æ—¶åºåˆ†æä½¿ç”¨çš„å·¥å…·ï¼š

- Mentor Modelsim
- Cadence NC-Verilog
- Sysnopsys  VCS

## 1.4 é™æ€æ—¶åºåˆ†æä¹‹å‰çš„å‡†å¤‡å·¥ä½œ

æ’°å†™åŸºæœ¬çš„æ—¶åºçº¦æŸæ–‡ä»¶ï¼Œå‘ŠçŸ¥æ—¶åºå¼•æ“ä¸€äº›å¿…è¦çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚æ—¶é’Ÿï¼Œè¾“å…¥è¾“å‡ºå»¶æ—¶ç­‰ï¼‰ã€‚è‹¥æ²¡æœ‰æ­£ç¡®çš„æ—¶åºçº¦æŸï¼Œé‚£ä¹ˆæ—¶åºåˆ†æçš„ç»“æœæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚

![](2.png)
![Dè§¦å‘å™¨ä¸­Tsetupï¼ŒTholdï¼ŒTcoçš„ç”±æ¥](3.png)

(https://upload-images.jianshu.io/upload_images/16278820-f4db83c260dc29ea.png)

## 1.5 æ—¶åºåˆ†æä¸­çš„å¸¸ç”¨æœ¯è¯­

- æºæ—¶é’Ÿï¼ˆSource Clock/Launch Clockï¼Œä¹Ÿç§°ä¸ºå‘èµ·æ—¶é’Ÿï¼‰
- ç›®çš„æ—¶é’Ÿï¼ˆDestination Clock/Capture Clockï¼Œä¹Ÿç§°ä¸ºæ•è·æ—¶é’Ÿï¼‰
- å‘èµ·æ²¿ï¼ˆlaunch edge,æºæ—¶é’Ÿäº§ç”Ÿæ•°æ®çš„æœ‰æ•ˆæ—¶é’Ÿæ²¿ï¼‰
- æ•è·æ²¿ï¼ˆcapture edge,ç›®çš„æ—¶é’Ÿæ•è·æ•°æ®çš„æœ‰æ•ˆæ—¶é’Ÿæ²¿ï¼‰å‘èµ·æ²¿é€šå¸¸åœ¨0nsï¼Œæ•è·æ²¿é€šå¸¸åœ¨ä¸‹ä¸€ä¸ªå‘èµ·æ²¿ï¼Œå‘èµ·æ²¿å’Œæ•è·æ²¿é€šå¸¸ç›¸å·®ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚

![](4.png)

[^_^]:
    ![](https://upload-images.jianshu.io/upload_images/16278820-0e087e4f622890be.png)

## 1.6 ä¸€æ¡æ™®é€šæ—¶åºè·¯å¾„çš„ä¸‰è¦ç´ 

- æºæ—¶é’Ÿè·¯å¾„ï¼šä»æºæ—¶é’Ÿçš„æºèŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯FPGAçš„æ—¶é’Ÿè¾“å…¥å¼•è„šï¼‰åˆ°æºå¯„å­˜å™¨çš„æ—¶é’Ÿç«¯å£çš„è·¯å¾„ã€‚å½“æ—¶åºè·¯å¾„çš„èµ·ç‚¹æ˜¯FPGAè¾“å…¥ç«¯å£æ—¶ï¼Œè¯¥æ—¶åºè·¯å¾„æ˜¯æ²¡æœ‰æºæ—¶é’Ÿè·¯å¾„çš„ã€‚

- æ•°æ®è·¯å¾„ï¼šä»æ—¶åºè·¯å¾„çš„èµ·ç‚¹åˆ°æ—¶åºè·¯å¾„çš„ç»ˆç‚¹ä¹‹é—´çš„æ•°æ®ä¼ æ’­è·¯å¾„ã€‚æ—¶åºè·¯å¾„çš„èµ·ç‚¹å¯ä»¥æ˜¯æºå¯„å­˜å™¨çš„æ—¶é’Ÿç«¯å£æˆ–FPGAçš„è¾“å…¥ç«¯å£ï¼Œæ—¶åºè·¯å¾„çš„ç»ˆç‚¹å¯ä»¥æ˜¯ç›®çš„å¯„å­˜å™¨çš„è¾“å…¥ç«¯å£æˆ–FPGAçš„è¾“å‡ºç«¯å£ã€‚

- ç›®çš„æ—¶é’Ÿè·¯å¾„ï¼šä»ç›®çš„æ—¶é’Ÿçš„æºèŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯FPGAçš„æ—¶é’Ÿè¾“å…¥å¼•è„šï¼‰åˆ°ç›®çš„å¯„å­˜å™¨çš„æ—¶é’Ÿç«¯å£çš„è·¯å¾„ã€‚å½“æ—¶åºè·¯å¾„çš„ç»ˆç‚¹æ˜¯FPGAçš„è¾“å‡ºç«¯å£æ—¶ï¼Œè¯¥æ—¶åºè·¯å¾„æ˜¯æ²¡æœ‰ç›®çš„æ—¶é’Ÿè·¯å¾„çš„ã€‚

![](5.png)

[^_^]:
    (https://upload-images.jianshu.io/upload_images/16278820-a2e757ab88ff5e0e.png)

## 1.7 FPGAä¸­å¸¸è§çš„å››ç§æ—¶åºè·¯å¾„

![](6.png)

[^_^]:
    (https://upload-images.jianshu.io/upload_images/16278820-7e62b58cd7ca85e4.png)

**ç¬¬ä¸€ç§ï¼Œä»FPGAçš„è¾“å…¥ç«¯å£åˆ°ç›®çš„å¯„å­˜å™¨çš„æ•°æ®è¾“å…¥ç«¯å£ ã€‚**

![](7.png)

[^_^]:
    (https://upload-images.jianshu.io/upload_images/16278820-dd8c68716e89e702.png)

- æ•°æ®ç”±Board clockå‘èµ·å¹¶åœ¨FPGAå¤–éƒ¨äº§ç”Ÿï¼›
- æ•°æ®ç»è¿‡Input Delayçš„å»¶è¿Ÿååˆ°è¾¾FPGAçš„è¾“å…¥ç«¯å£ï¼›
- æ•°æ®ç»è¿‡FPGAçš„Internal Delayååˆ°è¾¾ç”±ç›®çš„æ—¶é’Ÿé©±åŠ¨çš„ç›®çš„å¯„å­˜å™¨ã€‚è¿™ç§è·¯å¾„æ˜¯æ²¡æœ‰æºæ—¶é’Ÿè·¯å¾„çš„ï¼Œç”¨æˆ·éœ€è¦çº¦æŸ`Input Delay`å’Œ`æ—¶é’Ÿ`æ¥å‘ŠçŸ¥æ—¶åºå¼•æ“å¿…è¦ä¿¡æ¯ï¼Œæ—¶åºå¼•æ“æ‰èƒ½æ­£ç¡®çš„åˆ†æè¿™ç§è·¯å¾„ã€‚

**ç¬¬äºŒç§ï¼Œä»æºå¯„å­˜å™¨çš„æ—¶é’Ÿç«¯å£åˆ°ç›®çš„å¯„å­˜å™¨çš„æ•°æ®è¾“å…¥ç«¯å£ã€‚**

![](8.png)

[^_^]:
    (https://upload-images.jianshu.io/upload_images/16278820-1324828c4e3dc953.png)

- æ•°æ®ç”±æºæ—¶é’Ÿå‘èµ·å¹¶åœ¨FPGAå†…éƒ¨äº§ç”Ÿï¼›
- æ•°æ®ç»è¿‡Data Path Delayååˆ°è¾¾ç”±ç›®çš„æ—¶é’Ÿé©±åŠ¨çš„ç›®çš„å¯„å­˜å™¨ã€‚è¿™ç§æ—¶åºè·¯å¾„æ˜¯æœ€å¸¸è§çš„ï¼Œç”¨æˆ·éœ€è¦çº¦æŸ`æºæ—¶é’Ÿ`å’Œ`ç›®çš„æ—¶é’Ÿ`å‘ŠçŸ¥æ—¶åºå¼•æ“å¿…è¦çš„ä¿¡æ¯ï¼Œæ—¶åºå¼•æ“æ‰èƒ½æ­£ç¡®çš„åˆ†æè¿™ç§æ—¶åºè·¯å¾„ã€‚

**ç¬¬ä¸‰ç§ï¼Œä»æºå¯„å­˜å™¨çš„æ—¶é’Ÿç«¯å£åˆ°FPGAçš„è¾“å‡ºç«¯å£ã€‚**

![](9.png)

[^_^]:
    https://upload-images.jianshu.io/upload_images/16278820-0e8cca2a51a72a2f.png)

- æ•°æ®ç”±æºæ—¶é’Ÿå‘èµ·å¹¶åœ¨FPGAå†…éƒ¨äº§ç”Ÿï¼›
- æ•°æ®ç»è¿‡`Internal Delay`ååˆ°è¾¾è¾“å‡ºç«¯å£ï¼›
- æ•°æ®ç»è¿‡`Output Delay`åè¢«`Board Clock`æ•è·åˆ°ã€‚è¿™ç§è·¯å¾„æ˜¯æ²¡æœ‰ç›®çš„æ—¶é’Ÿè·¯å¾„çš„ï¼Œç”¨æˆ·éœ€è¦çº¦æŸ`Output Delay`å’Œ`æ—¶é’Ÿ`æ¥å‘ŠçŸ¥æ—¶åºå¼•æ“å¿…è¦ä¿¡æ¯ï¼Œæ—¶åºå¼•æ“æ‰èƒ½æ­£ç¡®çš„åˆ†æè¿™ç§è·¯å¾„ã€‚

**ç¬¬å››ç§ï¼Œä»FPGAçš„è¾“å…¥ç«¯å£åˆ°FPGAçš„è¾“å‡ºç«¯å£ã€‚**

![](10.png)

[^_^]:
    (https://upload-images.jianshu.io/upload_images/16278820-246df11ad75d3597.png)

- æ•°æ®æ¨ªç©¿FPGAï¼Œæ²¡æœ‰ç»è¿‡ä»»ä½•è§¦å‘å™¨ï¼Œè¿™ç§è·¯å¾„ä¹Ÿå«`in-to-out path`ï¼Œçº¦æŸè¾“å…¥å’Œè¾“å‡ºå»¶æ—¶çš„å‚è€ƒæ—¶é’Ÿå¯ä»¥ä½¿ç”¨è™šæ‹Ÿæ—¶é’Ÿã€‚è¿™ç§è·¯å¾„ä¸­åªæœ‰æ•°æ®è·¯å¾„ï¼Œç”¨æˆ·éœ€è¦çº¦æŸ`Input Delay`å’Œ`Output Delay`ï¼Œå‘ŠçŸ¥æ—¶åºå¼•æ“å¿…è¦çš„ä¿¡æ¯ï¼Œæ—¶åºå¼•æ“æ‰èƒ½æ­£ç¡®çš„åˆ†æè¿™ç§æ—¶åºè·¯å¾„ã€‚


# 2. Setupæ£€æŸ¥

## 2.1 æ—¶åºå¼•æ“å¦‚ä½•è¿›è¡ŒSetupæ£€æŸ¥ï¼Ÿ

- ç¡®å®šå»ºç«‹æ—¶é—´è¦æ±‚ï¼ˆç¡®å®šç”¨äºå»ºç«‹æ—¶é—´åˆ†æçš„å‘èµ·æ²¿å’Œæ•è·æ²¿ï¼‰

  
    æ—¶åºå¼•æ“ä¼šæ‰¾å‡ºå‘èµ·æ—¶é’Ÿå’Œæ•è·æ—¶é’Ÿçš„æœ€å°å…¬å…±å‘¨æœŸï¼Œç„¶ååœ¨æœ€å°å…¬å…±å‘¨æœŸå†…æ‰¾åˆ°æ‰€æœ‰å‘èµ·æ—¶é’Ÿæ²¿å’Œæ•è·æ—¶é’Ÿæ²¿çš„æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œå¹¶åœ¨æ‰€æœ‰å¯èƒ½çš„æƒ…å†µä¸­æŒ‘é€‰å‡ºæœ€å°çš„å»ºç«‹æ—¶é—´éœ€æ±‚ï¼ˆå¤§äº0ï¼‰ï¼Œä»è€Œç¡®å®šäº†Launch edgeå’ŒCapture edgeã€‚

![](11.png)

(https://upload-images.jianshu.io/upload_images/16278820-7e83f629b9f497bc.png)

åœ¨ä¸Šå›¾ä¸­ï¼Œæœ‰å»ºç«‹æ—¶é—´è¦æ±‚æœ‰ä¸¤ä¸ªï¼š`Setup(1)`å’Œ`Setup(2)`ã€‚å–æ›´å°çš„`Setup(2)`ï¼Œç„¶ååˆ†åˆ«å–å¯¹åº”çš„`Launch edge`å’Œ`Capture edge`å¯¹åº”çš„æ—¶é—´ä¸º`Source Clock Launch Edge Time`å’Œ`Destination Clock Capture Edge Time`ï¼š

    Source Clock Launch Edge Time: 0ns + 1*T(clk0) = 6ns
    Destination Clock Capture Edge Time: 0ns + 2*T(clk1) = 8ns
    Setup Path Requirement = capture edge time - launch edge time = 2ns

- è®¡ç®—æ•°æ®çš„éœ€æ±‚æ—¶é—´

$$
Data\_Required\_Time (setup) = capture\_edge\_time + destination\_clock\_path\_delay - clock\_uncertainty - setup\_time
$$

[^_^]:
    $$
Data\ Required\ Time (setup) &= capture\ edge\ time + destination\ clock\ path\ delay - clock\ uncertainty - setup\ time
$$

[^_^]:
    $$
\begin{equation}
\begin{aligned}
Data\ Required\ Time (setup) &= capture\ edge\ time \\
&+ destination\ clock\ path\ delay \\
&- clock\ uncertainty \\
&- setup\ time
\end{aligned}
\end{equation}
$$

[^_^]:
    ![](https://upload-images.jianshu.io/upload_images/16278820-9c3d54b58de5b396.png)

- è®¡ç®—æ•°æ®çš„åˆ°è¾¾æ—¶é—´

$$
Data\_Arrival\_Time (setup) = launch\_edge\_time + source\_clock\_path\_delay + datapath\_delay
$$

[^_^]:
    $$
\begin{equation}
\begin{aligned}
Data\ Arrival\ Time (setup) &= launch\ edge\ time \\
&+ source\ clock\ path\ delay \\
&+ datapath\ delay
\end{aligned}
\end{equation}
$$

[^_^]:
    ![](https://upload-images.jianshu.io/upload_images/16278820-b6d4cbafbc49e4dd.png)

- è®¡ç®—Setupçš„è£•é‡ï¼ˆSlackï¼‰

$$
Slack\ (setup) = Data\_Required\_Time - Data\_Arrival\_Time
$$


> å¯¹äºå•ä¸ªæ—¶é’Ÿè€Œè¨€ï¼š$T^{FF1}_{clk\_delay}+T^{FF1}_{co}+T_{setup}<=T^{FF2}_{clk\_delay}+T_{period}$

## 2.2 Setupåˆ†æå®ä¾‹

Data Arrival time = lauch_edge + Tclka + Tco + Tdata(Tlogic+Tnet)  

![](https://upload-images.jianshu.io/upload_images/16278820-9c193a90549330ef.png)

Data Require Time = capture edge + Tclkb - Tsu

![](https://upload-images.jianshu.io/upload_images/16278820-899b2da0dcf73489.png)

Setup Slack= Data Require Time  - Data Arrival Time

![](https://upload-images.jianshu.io/upload_images/16278820-0ca4bffb83f26321.png)

## 2.3 æ ¹æ®å…¬å¼åˆ†æå“ªäº›å› ç´ ä¼šå¯¼è‡´Setup Slackä¸ºè´Ÿå‘¢ï¼Ÿ

Setup Slack = ï¼ˆCapture edge â€“ Launch edgeï¼‰+ ï¼ˆdestination clk delay â€“ source clk delayï¼‰- Setup time - clk uncertainty â€“ datapath delay 

Setup Slack =  Setup Requirementï¼ˆä¸€å®šå¤§äº0ï¼‰ + clk skew â€“ Tsu â€“ Tclk uncertainty â€“ Tlogic â€“ Tnet - Tco

**â‘  Setup Requirement ä¸å®é™…æƒ…å†µä¸ç¬¦**

å»ºç«‹æ—¶é—´éœ€æ±‚è¿‡å°ï¼Œè¿™ç§æƒ…å†µé€šå¸¸ä¼šåœ¨åŒæ­¥è·¨æ—¶é’ŸåŸŸè·¯å¾„ä¸­å‡ºç°ï¼Œåœ¨åŒæ­¥è·¨æ—¶é’ŸåŸŸè·¯å¾„ä¸­çš„æºæ—¶é’Ÿé¢‘ç‡ä¸ç›®çš„æ—¶é’Ÿé¢‘ç‡çš„ç›¸ä½å…³ç³»è™½ç„¶æ˜¯å·²çŸ¥çš„ï¼Œä½†æ˜¯æ—¶åºå¼•æ“é»˜è®¤é€‰æ‹©çš„æ•è·æ²¿é€šå¸¸éƒ½æ˜¯é”™è¯¯çš„ï¼Œéœ€è¦ç”¨æˆ·é€šè¿‡å¤šå‘¨æœŸè·¯å¾„çº¦æŸçš„æ–¹å¼æ‰‹åŠ¨ä¿®æ­£å»ºç«‹æ—¶é—´éœ€æ±‚ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œä¸¤ä¸ªåŒé¢‘ä¸åŒç›¸çš„åŒæ­¥æ—¶é’Ÿï¼Œæ—¶åºå¼•æ“é»˜è®¤é€‰æ‹©çš„æ•è·æ²¿æ˜¯ç›®çš„æ—¶é’Ÿç¬¬äºŒä¸ªä¸Šå‡æ²¿ï¼Œå¯¼è‡´å»ºç«‹æ—¶é—´éœ€æ±‚éå¸¸å°ï¼Œæœ€ç»ˆè‚¯å®šä¼šå¯¼è‡´æ—¶åºè¿ä¾‹ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-f31384fbf08a18cf.png)

**â‘¡ clk skewä¸ºè´Ÿå€¼ï¼Œä¸”å¾ˆå¤§**

é€šå¸¸æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªæ—¶é’Ÿä¸‹çš„æ—¶é’Ÿæ­ªæ–œä¸åº”è¯¥è¶…è¿‡300psï¼ŒåŒæ­¥è·¨æ—¶é’ŸåŸŸè·¯å¾„çš„æ—¶é’Ÿæ­ªæ–œä¸åº”è¯¥è¶…è¿‡500psï¼Œå¼‚æ­¥è·¨æ—¶é’ŸåŸŸè·¯å¾„çš„æ—¶é’Ÿæ­ªæ–œä¸€èˆ¬æ¯”è¾ƒå¤§ï¼Œå› ä¸ºå®ƒä»¬çš„æ—¶é’Ÿæºä¸åŒã€‚å½“å‡ºç°æ—¶é’Ÿæ­ªæ–œå¤§çš„æƒ…å†µæ—¶:

- æ£€æŸ¥æºæ—¶é’Ÿè·¯å¾„å’Œç›®çš„æ—¶é’Ÿè·¯å¾„ä¸Šæ˜¯å¦å¹²å‡€ï¼Œæ—¶é’Ÿè·¯å¾„ä¸Šæ˜¯å¦å¼•å…¥äº†ç»„åˆé€»è¾‘ï¼Œæ—¶é’Ÿè·¯å¾„æ˜¯å¦ä½¿ç”¨äº†è¿‡å¤šçš„BUFGCEï¼Œæ—¶é’Ÿè·¯å¾„ä¸Šæ˜¯å¦çº§è”äº†å¤šä¸ªBUFGCEå¯¼è‡´æ—¶é’Ÿå»¶æ—¶å˜å¤§
- æ£€æŸ¥æºæ—¶é’Ÿè·¯å¾„å’Œç›®çš„æ—¶é’Ÿè·¯å¾„æ‰€ç»è¿‡çš„æ¨¡å—æ˜¯å¦ç›¸åŒï¼Œæ¯”å¦‚æºæ—¶é’Ÿè·¯å¾„ä¸Šç»è¿‡å…¨å±€ç¼“å†²ï¼ŒPMMCMï¼Œä½†æ˜¯ç›®çš„æ—¶é’Ÿè·¯å¾„ä¸Šåªç»è¿‡äº†å…¨å±€ç¼“å†²ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€æ¡è·¯å¾„çš„æºæ—¶é’Ÿè·¯å¾„ä¸Šæœ‰BUFGCE/MMCM/BUFGCEï¼Œè€Œç›®çš„æ—¶é’Ÿè·¯å¾„ä¸Šåªæœ‰BUFGCEï¼Œæ‰€ä»¥æºæ—¶é’Ÿè·¯å¾„å’Œç›®çš„æ—¶é’Ÿè·¯å¾„çš„å»¶æ—¶ä¸åŒï¼Œå¯¼è‡´æ—¶é’Ÿæ­ªæ–œè¾ƒå¤§ï¼Œåº”è¯¥å°½é‡é¿å…æ­¤ç±»è·¯å¾„ã€‚ç¬¬äºŒæ¡è·¯å¾„çš„æºæ—¶é’Ÿå’Œç›®çš„æ—¶é’Ÿéƒ½æ˜¯æ¥æºäºMMCMçš„ä¸åŒçš„æ—¶é’Ÿï¼Œæ‰€ä»¥æ—¶é’Ÿæ­ªæ–œè¾ƒå°ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-61fa0cf5f4cc00a2.png)

**â‘¢ $T_{su}$/$T_{co}$å¤§**

å½“è®¾è®¡ä¸­ä½¿ç”¨Blockï¼ˆDSP/Block RAMç­‰ï¼‰æ—¶ï¼Œåº”è¯¥è¦æ³¨æ„ä»¥ä¸‹é—®é¢˜ã€‚å¯¹äºä»¥è¿™äº›Blockä¸ºæ—¶åºè·¯å¾„çš„èµ·ç‚¹æˆ–ç»ˆç‚¹çš„æ—¶åºè·¯å¾„ï¼Œè¿™äº›Blockçš„Tsu/Th/Tcoéƒ½æ¯”æ™®é€šçš„å¯„å­˜å™¨å¤§ï¼Œè€Œä¸”è¿™äº›Blockçš„å¸ƒçº¿å»¶æ—¶å’Œæ—¶é’Ÿæ­ªæ–œæ¯”è¾ƒå¤§ã€‚æ‰€ä»¥å½“ä½¿ç”¨è¿™äº›Blockä½œä¸ºæ—¶åºè·¯å¾„çš„ç»ˆç‚¹æ—¶ï¼Œå®ƒçš„èµ·ç‚¹ä¸€å®šè¦æ˜¯è§¦å‘å™¨ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªBlock RAMçš„å†™æ•°æ®ä¿¡å·ï¼Œè¾“å…¥è¿›Blockå‰æœ€å¥½æ‰“ä¸€æ‹ã€‚å½“ä½¿ç”¨è¿™äº›Blockä½œä¸ºæ—¶åºè·¯å¾„çš„èµ·ç‚¹æ—¶ï¼Œåº”è¯¥ä½¿ç”¨Block å†…éƒ¨çš„è¾“å‡ºå¯„å­˜å™¨ï¼Œæ¯”å¦‚ä½¿ç”¨ç”±Block RAMç»„æˆçš„FIFOæ—¶ï¼Œå°½é‡ä¸è¦ä½¿ç”¨é¦–å­—ç½®å‡ºçš„ï¼Œè€Œä½¿ç”¨æ‰“ä¸€æ‹åè¾“å‡ºçš„ï¼Œä½¿ç”¨åè€…å¯ä»¥æ˜¾è‘—é™ä½Tcoã€‚å½“æ—¶åºè·¯å¾„ä¸ºä»ä¸€ä¸ªBlockåˆ°å¦ä¸€ä¸ªBlockæ—¶ï¼Œä¸­é—´éœ€è¦è¿›è¡Œæ‰“æ‹æ“ä½œã€‚å½“ä½¿ç”¨è¿™äº›Blockçš„æ§åˆ¶ç«¯å£æ—¶ï¼Œåº”è¯¥ä¿è¯è¿™äº›æ§åˆ¶ä¿¡å·çš„ä½æ‰‡å‡ºï¼Œå¦‚ä½¿ç”¨ç”±Block RAMç»„æˆçš„FIFOæ—¶ï¼Œåº”è¯¥å°½é‡é™ä½è¯»/å†™èƒ½ä¿¡/åœ°å€ä¿¡å·çš„æ‰‡å‡ºã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-6c1ef4f7de52515a.png)

**â‘£ $T_{logic}$å¤§**

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€»è¾‘å»¶æ—¶ä¸æ—¶åºè·¯å¾„çš„é€»è¾‘å±‚çº§æ•°æ¯æ¯ç›¸å…³ï¼Œé€»è¾‘å±‚çº§æ˜¯æŒ‡æ—¶åºè·¯å¾„çš„èµ·ç‚¹å’Œç»ˆç‚¹ä¹‹é—´ç»„åˆé€»è¾‘å•å…ƒï¼ˆLUTï¼‰çš„ä¸ªæ•°ï¼Œè€Œé€»è¾‘å±‚çº§å¤šä¸€çº§æ„å‘³ç€å¤š1ä¸ªLUTçš„å»¶æ—¶åŠ 1æ¡è¿æ¥LUTçš„ç½‘çº¿å»¶æ—¶ã€‚é€šå¸¸ä¸€çº§é€»è¾‘å±‚çº§çš„å»¶æ—¶æ ‡å‡†æ˜¯1ä¸ªLUTåŠ 1æ ¹ç½‘çº¿çš„æ€»å»¶è¿Ÿä¸º0.5nsï¼Œå¦‚æœæŸæ¡è·¯å¾„çš„é€»è¾‘çº§æ•°å¤§äºæ—¶é’Ÿå‘¨æœŸ/0.5nsï¼Œé‚£ä¹ˆè¿™æ¡è·¯å¾„å°±è¢«ç§°ä¸ºé•¿è·¯å¾„ã€‚

å¸¸ç”¨çš„å¤„ç†é•¿è·¯å¾„çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š

- ä¿®æ”¹rtlä»£ç ï¼Œåœ¨é•¿è·¯å¾„çš„é€»è¾‘ä¸­æ’å…¥æµæ°´çº¿ï¼Œå°†é•¿è·¯å¾„æ‰“ç ´åˆ†ä¸ºå¤šæ¡çŸ­è·¯å¾„ï¼›

- retimingä¼˜åŒ–æ–¹å¼ï¼Œretimingå®é™…ä¸Šæ˜¯å¯„å­˜å™¨é‡å®šå‘ï¼ŒåŸç†æ˜¯å½“æŸæ¡é•¿è·¯å¾„çš„ç›¸é‚»è·¯å¾„çš„å»ºç«‹æ—¶é—´è£•é‡è¾ƒå¤§ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è°ƒæ•´ä¸­é—´å¯„å­˜å™¨çš„ä½ç½®ï¼Œæ¥è°ƒæ•´å¸ƒçº¿å»¶è¿Ÿï¼Œé€šè¿‡é€‚å½“å¢åŠ ç›¸é‚»è·¯å¾„çš„å¸ƒçº¿å»¶è¿Ÿè€Œå‡å°‘é•¿è·¯å¾„çš„å¸ƒçº¿å»¶è¿Ÿï¼Œä½¿å¾—é‚£äº›æ—¶åºè¿ä¾‹è¾ƒå°çš„é•¿è·¯å¾„é€šè¿‡è¿™ç§å¾®è°ƒå®ç°æ—¶åºæ”¶æ•›ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¼˜åŒ–çš„åŠ›åº¦éå¸¸æœ‰é™ï¼Œå®ƒåªé€‚åˆæ—¶åºè¿ä¾‹è¾ƒå°çš„é•¿è·¯å¾„ï¼Œå¯¹äºä¸€äº›å»¶æ—¶ç‰¹åˆ«å¤§çš„é•¿è·¯å¾„è€Œè¨€ï¼Œä¹Ÿæ˜¯æ— åŠ›å›å¤©ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-5df06563e25d1bc6.png)

**â‘¤Tnetå¤§**

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¸ƒçº¿å»¶è¿Ÿä¸è®¾è®¡æ•´ä½“æˆ–å±€éƒ¨æ¨¡å—çš„èµ„æºåˆ©ç”¨ç‡ä»¥åŠæ‹¥å¡ç¨‹åº¦æ¯æ¯ç›¸å…³ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€æ¡ç½‘çº¿çš„å»¶æ—¶å°äº1nsï¼Œåœ¨å‘ç”Ÿæ‹¥å¡çš„åŒºåŸŸï¼Œç½‘çº¿çš„å»¶æ—¶å¯èƒ½è¾¾åˆ°è‹¥å¹²nsï¼Œå¯¼è‡´å¸ƒçº¿å»¶æ—¶æ˜¾è‘—å¢åŠ ã€‚ä¸ºäº†è§£å†³å¸ƒçº¿å»¶è¿Ÿå¤§ï¼Œéœ€è¦ä»é™ä½èµ„æºåˆ©ç”¨ç‡å’Œé™ä½æ‹¥å¡ç¨‹åº¦ä¸‹æ‰‹ï¼Œæ¯”å¦‚æŸä¸ªæ¨¡å—ä½¿ç”¨äº†å¤§é‡çš„å¯„å­˜å™¨å †ï¼Œå ç”¨äº†å¤§é‡çš„èµ„æºï¼Œæ­¤æ—¶åº”è¯¥è€ƒè™‘ä½¿ç”¨Block RAMä»£æ›¿è¿™äº›å¯„å­˜å™¨å †ï¼›æŸä¸ªæ¨¡å—ä½¿ç”¨äº†å¤§é‡çš„æ•°æ®é€‰æ‹©å™¨ï¼Œæ­¤æ—¶åº”è¯¥è€ƒè™‘å¦‚ä½•ä¼˜åŒ–è¿™äº›æ•°æ®é€‰æ‹©å™¨ï¼›æŸä¸ªæ¨¡å—çš„æ§åˆ¶ä¿¡å·æ‰‡å‡ºæ¯”è¾ƒå¤§ï¼Œä¸å…¶ä»–æ¨¡å—çš„äº’è”å¾ˆé‡ï¼Œæ­¤æ—¶åº”è¯¥è€ƒè™‘å¦‚ä½•é™ä½è¿™äº›ä¿¡å·çš„æ‰‡å‡ºï¼›æŸæ¡æ—¶åºè·¯å¾„çš„èµ·ç‚¹æˆ–ç»ˆç‚¹æ˜¯Blockï¼Œç”±äºBlockçš„ä½ç½®æ¯”è¾ƒå›ºå®šï¼Œæ‰€ä»¥Blockçš„å¸ƒçº¿å»¶è¿Ÿä¼šå¤§ä¸€äº›ã€‚æœ€åéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œä¸€å®šè¦é¢å¤–å…³æ³¨é«˜æ‰‡å‡ºçš„ç½‘çº¿ä¹Ÿä¼šå¯¹å¸ƒçº¿å»¶æ—¶äº§ç”Ÿå½±å“ã€‚ğŸ”ºTimeQuestæ—¶åºåˆ†æï¼ˆSetupï¼‰[å›¾ç‰‡ä¸Šä¼ å¤±è´¥...(image-23b6a0-1596829289696)]

# 3. Holdupæ£€æŸ¥

## 3.1 æ—¶åºå¼•æ“å¦‚ä½•è¿›è¡ŒHoldupæ£€æŸ¥ï¼Ÿ

**â‘  ç¡®å®šä¿æŒæ—¶é—´è¦æ±‚ï¼ˆç¡®å®šå‘èµ·æ—¶é’Ÿæ²¿å’Œæ•è·æ—¶é’Ÿæ²¿ï¼‰**

ä¿æŒæ—¶é—´è¦æ±‚æ˜¯ä»¥å»ºç«‹æ—¶é—´è¦æ±‚ä¸ºåŸºç¡€çš„ï¼Œä¿æŒæ—¶é—´è¦æ±‚æœ‰ä¸¤ç§ï¼š 

- å½“å‰å»ºç«‹æ—¶é—´çš„å‘èµ·æ²¿äº§ç”Ÿçš„æ•°æ®ä¸èƒ½è¢«å½“å‰å»ºç«‹æ—¶é—´çš„æ•è·æ²¿çš„å‰ä¸€ä¸ªæœ‰æ•ˆæ²¿æ•è·

- å½“å‰å»ºç«‹æ—¶é—´å‘èµ·æ²¿çš„ä¸‹ä¸€ä¸ªæœ‰æ•ˆæ²¿äº§ç”Ÿçš„æ•°æ®ä¸èƒ½è¢«å½“å‰å»ºç«‹æ—¶é—´çš„æ•è·æ²¿æ•è·

![](https://upload-images.jianshu.io/upload_images/16278820-503757e500d8b3bb.png)

æ ¹æ®æ‰€æœ‰çš„å»ºç«‹æ—¶é—´éœ€æ±‚æ‰¾åˆ°æ‰€æœ‰çš„ä¿æŒæ—¶é—´éœ€æ±‚ï¼Œå¹¶ä»ä¿æŒæ—¶é—´éœ€æ±‚ï¼ˆå¯æ­£å¯è´Ÿï¼‰ä¸­æ‰¾åˆ°æœ€å¤§çš„ä¿æŒæ—¶é—´éœ€æ±‚ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-a92e8938a8f3ad4c.png)

**â‘¡ è®¡ç®—æ•°æ®çš„éœ€æ±‚æ—¶é—´**

![](https://upload-images.jianshu.io/upload_images/16278820-ee12cd231c1fd766.png)

**â‘¢ è®¡ç®—æ•°æ®çš„åˆ°è¾¾æ—¶é—´**

![](https://upload-images.jianshu.io/upload_images/16278820-707c865d2a2588e7.png)

**â‘£ è®¡ç®—Hold upçš„è£•é‡ï¼ˆslackï¼‰**

![](https://upload-images.jianshu.io/upload_images/16278820-a787282d8af61140.png)

## 3.2 Holdupåˆ†æå®ä¾‹

 Data Arrival timeï¼ˆnew dataï¼‰ = lauch edge + Tclka + Tco + Tdata(Tlogic+Tnet) 

 Data Require time = capture edge + Tclkb + Th 

Hold up slack = Data Arrival time - Data Require time

![](https://upload-images.jianshu.io/upload_images/16278820-bdce9bb9dc3b60d8.png)

## 3.3 æ ¹æ®å…¬å¼åˆ†æå“ªäº›å› ç´ ä¼šå¯¼è‡´Holdup Slackä¸ºè´Ÿå‘¢ï¼Ÿ

 Holdup Slack = ï¼ˆlauch edge - capture edgeï¼‰ + ï¼ˆTclka â€“ Tclkbï¼‰ + Tco + Tdata(Tlogic+Tnet) -Th 

 Holdup Slack =  Tco + Tdata(Tlogic+Tnet) -Th - Holdup Requirement - clk skew  

Hold up Slackä¸ºè´Ÿçš„æƒ…å†µæ¯”è¾ƒå°‘è§ï¼Œå½“Setup Slackæœ‰è¾ƒå¤§è£•é‡æ—¶ï¼Œé€šå¸¸å·¥å…·ä¼šè‡ªåŠ¨æ’å…¥å»¶æ—¶æ¥å¢åŠ Hold up Slackã€‚

**â‘  ä¿æŒæ—¶é—´éœ€æ±‚å¤§äº0ï¼ˆé€šå¸¸ç”±æ—¶åºå¼•æ“é€‰æ‹©é”™è¯¯çš„æ•è·æ²¿å¯¼è‡´ï¼‰**

**â‘¡ æ—¶é’Ÿæ­ªæ–œå¤§äº300psï¼ˆé€šå¸¸ç”±æ—¶é’Ÿè·¯å¾„ä¸Šçš„ç»„åˆé€»è¾‘å¯¼è‡´ï¼‰ **

**â‘¢ Thè¿‡å¤§ï¼ˆé€šå¸¸ç”±æ—¶åºè·¯å¾„ç»ˆç‚¹ä¸ºBlockå¯¼è‡´ï¼‰**

![TimeQuestæ—¶åºåˆ†æï¼ˆHoldup slackï¼‰](https://upload-images.jianshu.io/upload_images/16278820-341337fbcaa1f6b4.png)


# 4. Recoveryæ£€æŸ¥

## 4.1 æ—¶åºå¼•æ“å¦‚ä½•è¿›è¡ŒRecoveryæ£€æŸ¥ï¼Ÿ

![](https://upload-images.jianshu.io/upload_images/16278820-e626431c36e5d4e3.png)

![TimeQuestæ—¶åºåˆ†æï¼ˆRecoveryï¼‰ ](https://upload-images.jianshu.io/upload_images/16278820-fb01e42822c90d44.png)


## 4.2 æ—¶åºå¼•æ“å¦‚ä½•è¿›è¡ŒRemovalæ£€æŸ¥ï¼Ÿ

![](https://upload-images.jianshu.io/upload_images/16278820-061bd35725088d42.png)

![TimeQuestæ—¶åºåˆ†æï¼ˆRemovalï¼‰](https://upload-images.jianshu.io/upload_images/16278820-7c5158c7811a978e.png)

# 5. æ—¶åºçº¦æŸ

æ—¶åºå¼•æ“èƒ½å¤Ÿæ­£ç¡®åˆ†æ4ç§æ—¶åºè·¯å¾„çš„å‰ææ˜¯ï¼Œç”¨æˆ·å·²ç»è¿›è¡Œäº†æ­£ç¡®çš„æ—¶åºçº¦æŸã€‚æ—¶åºçº¦æŸæœ¬è´¨ä¸Šå°±æ˜¯å‘ŠçŸ¥æ—¶åºå¼•æ“ä¸€äº›è¿›è¡Œæ—¶åºåˆ†ææ‰€å¿…è¦çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åªèƒ½ç”±ç”¨æˆ·ä¸»åŠ¨å‘ŠçŸ¥ï¼Œæ—¶åºå¼•æ“å¯¹æœ‰äº›ä¿¡æ¯å¯ä»¥è‡ªåŠ¨æ¨æ–­ï¼Œä½†æ˜¯æ¨æ–­å¾—åˆ°çš„ä¿¡æ¯ä¸ä¸€å®šæ­£ç¡®ã€‚

- ç¬¬ä¸€ç§è·¯å¾„éœ€è¦çº¦æŸInput_delayï¼›
- ç¬¬äºŒç§è·¯å¾„éœ€è¦çº¦æŸæ—¶é’Ÿï¼›
- ç¬¬ä¸‰ç§è·¯å¾„éœ€è¦çº¦æŸoutput_delayï¼›
- ç¬¬å››ç§è·¯å¾„éœ€è¦çº¦æŸMax_delay/Min_delayï¼›

![](https://upload-images.jianshu.io/upload_images/16278820-37d52bafb1b5a729.png)

# 6. æ—¶é’Ÿçº¦æŸ

## 6.1 æ—¶é’Ÿçº¦æŸç±»å‹

é¦–å…ˆç”¨æˆ·å¿…é¡»è¦æ­£ç¡®çš„çº¦æŸæ—¶é’Ÿï¼Œæ—¶åºå¼•æ“æ‰èƒ½æ ¹æ®æ—¶é’Ÿä¿¡æ¯è¿›è¡Œå„ç§æ—¶åºæ£€æŸ¥ã€‚

ç”¨æˆ·çº¦æŸæ—¶é’Ÿæ—¶ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ç±»å‹çš„æ—¶é’Ÿéœ€è¦çº¦æŸã€‚ 

- ä¸»æ—¶é’Ÿï¼ˆPrimary Clockï¼‰
ä¸»æ—¶é’Ÿï¼ˆPrimary Clockï¼‰æœ‰ä¸¤ç§ç±»å‹ï¼šç¬¬ä¸€ç§æ˜¯ä»FPGAçš„å…¨å±€æ—¶é’Ÿè¾“å…¥å¼•è„šè¾“å…¥çš„æ—¶é’Ÿï¼›ç¬¬äºŒç§æ˜¯ä»é«˜é€Ÿæ”¶å‘å™¨è¾“å‡ºç»™ç”¨æˆ·çš„æ¢å¤æ—¶é’Ÿ

- ç”Ÿæˆæ—¶é’Ÿï¼ˆGenerated Clockï¼‰
ç”Ÿæˆæ—¶é’Ÿï¼ˆGenerated Clockï¼‰æœ‰ä¸¤ç§ç±»å‹ï¼šç¬¬ä¸€ç§æ˜¯ç”±FPGAçš„ä¸“ç”¨æ—¶é’Ÿç®¡ç†æ¨¡å—ï¼ˆPLL/MMCMï¼‰äº§ç”Ÿçš„æ—¶é’Ÿï¼ˆè¿™ç§æ—¶é’Ÿå¯ä»¥ç”±æ—¶åºå¼•æ“è‡ªåŠ¨æ¨æ–­å‡ºæ¥ï¼‰ï¼›ç¬¬äºŒç§æ˜¯ç”±ç”¨æˆ·é€šè¿‡LUTæˆ–å¯„å­˜å™¨äº§ç”Ÿçš„æ—¶é’Ÿï¼ˆè¿™ç§æ—¶é’Ÿå¿…é¡»ç”±ç”¨æˆ·æ‰‹åŠ¨çº¦æŸï¼‰ã€‚

**â‘  ä¸»æ—¶é’Ÿï¼ˆPrimary Clockï¼‰çº¦æŸ**

ä½¿ç”¨Create_clockè¿›è¡Œæ—¶åºçº¦æŸ

- ç¬¬ä¸€ç§æ˜¯ä»FPGAçš„å…¨å±€æ—¶é’Ÿè¾“å…¥å¼•è„šè¾“å…¥çš„æ—¶é’Ÿï¼šå…¨å±€æ—¶é’Ÿè¾“å…¥å¼•è„šæ˜¯sysclkï¼Œæ—¶é’Ÿå‘¨æœŸ10nsï¼Œå ç©ºæ¯”50%ï¼Œç›¸ç§»0åº¦ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-4bada57e33a0b303.png)

å…¨å±€æ—¶é’Ÿè¾“å…¥å¼•è„šæ˜¯ClkInï¼Œæ—¶é’Ÿå‘¨æœŸ10nsï¼Œå ç©ºæ¯”25%ï¼Œç›¸ç§»90åº¦ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-078a8f43c7d989f6.png)

- ç¬¬äºŒç§æ˜¯ä»é«˜é€Ÿæ”¶å‘å™¨è¾“å‡ºç»™ç”¨æˆ·çš„æ¢å¤æ—¶é’Ÿ å…¨å±€æ—¶é’Ÿè¾“å…¥å¼•è„šæ˜¯sysclkï¼Œæ—¶é’Ÿå‘¨æœŸ3.3nsï¼Œå ç©ºæ¯”50%ï¼Œç›¸ç§»0åº¦ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-55f1e9fe2a38485f.png)

**â‘¡ ç”Ÿæˆæ—¶é’Ÿï¼ˆGenerated Clockï¼‰çº¦æŸ**

ç”¨Create_generated_clockè¿›è¡Œæ—¶åºçº¦æŸ æ¯ä¸ªç”Ÿæˆæ—¶é’Ÿéƒ½ä¼šå¯¹åº”ä¸€ä¸ªæ—¶é’Ÿæºï¼ˆMaster_clkï¼‰ï¼Œè¿™ä¸ªæ—¶é’Ÿæºå¯ä»¥æ˜¯Primary Clockæˆ–è€…å¦ä¸€ä¸ªGenerated Clockã€‚åœ¨çº¦æŸç”Ÿæˆæ—¶é’Ÿæ—¶ï¼Œç”¨æˆ·ä¸éœ€è¦æè¿°ç”Ÿæˆæ—¶é’Ÿçš„å‘¨æœŸå’Œæ³¢å½¢ï¼Œåªéœ€è¦æè¿°ç”±Master_clkç»è¿‡äº†æ€æ ·çš„å˜åŒ–è€Œäº§ç”Ÿçš„ç”Ÿæˆæ—¶é’Ÿå³å¯ã€‚æ¯”å¦‚ç»è¿‡åˆ†é¢‘ï¼ˆ-devide_byï¼‰ï¼Œå€é¢‘(-multiply_by)ï¼Œåç›¸ï¼ˆ-invertï¼‰ï¼Œç›¸ç§»ï¼ˆ-edge_shiftï¼‰ç­‰ç­‰æ“ä½œã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-806f3504bf8fe5b4.png)

å½“ç”Ÿæˆæ—¶é’Ÿéœ€è¦è¿›è¡Œç›¸ç§»æ—¶ï¼Œä½¿ç”¨-edge_shifté€‰é¡¹ã€‚-edge_shiftä¸èƒ½ä¸-divide_by/-multipl_by/-invertåŒæ—¶ä½¿ç”¨ ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-d61d0e48be555354.png)

æ—¶åºå¼•æ“é»˜è®¤æƒ…å†µä¸‹ä¼šåˆ†ææ‰€æœ‰æ—¶é’Ÿä¹‹é—´çš„æ—¶åºè·¯å¾„ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ—¶é’Ÿåˆ†ç»„ï¼ˆ set_clock_groupï¼‰å‘½ä»¤æˆ–ä¼ªè·¯å¾„ï¼ˆset_false_pathï¼‰å‘½æ¥å…³é—­ä¸€éƒ¨åˆ†è·¯å¾„çš„æ—¶åºåˆ†æã€‚

- ä½¿ç”¨set_clock_groupå‘½ä»¤ï¼Œæ—¶åºå¼•æ“ä¼šå°†ä¸åŒåˆ†ç»„çš„æ—¶é’Ÿä¹‹é—´çš„è·¯å¾„åˆ†æå…³é—­ï¼Œç›¸åŒåˆ†ç»„çš„æ—¶é’Ÿä¹‹é—´çš„è·¯å¾„ä»ç„¶å­˜åœ¨ã€‚

- ä½¿ç”¨set_false_pathå‘½ä»¤ï¼Œæ—¶åºå¼•æ“ä¼šå¿½ç•¥ä¸¤ä¸ªæ—¶é’Ÿçš„åŒå‘è·¯å¾„ï¼Œè¢«å¿½ç•¥çš„è·¯å¾„ä¸ä¸€å®šèƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œéœ€è¦ç”¨æˆ·ç¡®ä¿è¯¥è·¯å¾„ä½¿ç”¨äº†ä¸¤çº§è§¦å‘å™¨åŒæ­¥æˆ–æŒ‰ç…§å¼‚æ­¥æ•°æ®ä¼ è¾“æ–¹å¼ä¼ è¾“æ•°æ®ã€‚ç”¨æˆ·è´Ÿè´£ä¿è¯è¿™äº›è¢«å¿½ç•¥çš„è·¯å¾„å¯ä»¥æ­£å¸¸å·¥ä½œã€‚

## 6.2 ä¸¤ä¸ªæ—¶é’Ÿçš„å…³ç³»

**â‘  åŒæ­¥æ—¶é’Ÿï¼ˆsynchronous clockï¼‰**

ä¸¤ä¸ªæ—¶é’Ÿä¹‹é—´çš„ç›¸å¯¹ç›¸ä½å…³ç³»æ˜¯å›ºå®šçš„ï¼ˆä¸¤ä¸ªæ—¶é’Ÿæ¥æºäºåŒä¸€ä¸ªPrimary clockï¼‰ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªæ—¶é’Ÿçš„é¢‘ç‡çš„æœ€å°å…¬å…±å‘¨æœŸæ˜¯ä¸ªæ•´æ•°ã€‚æ¯”å¦‚ä¸€ä¸ªç”Ÿæˆæ—¶é’Ÿï¼ˆ200Mï¼‰å’Œè¯¥ç”Ÿæˆæ—¶é’Ÿçš„Master_clkï¼ˆ100Mï¼‰ä¹‹é—´å°±å±äºåŒæ­¥æ—¶é’Ÿå…³ç³»ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ—¶é’Ÿçš„ç›¸ä½å…³ç³»è‚¯å®šæ˜¯ç¡®å®šçš„ï¼Œå¹¶ä¸”å¯ä»¥æ‰¾åˆ°ä¸¤ä¸ªæ—¶é’Ÿçš„æœ€å°å…¬å…±å‘¨æœŸã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªPrimary Clockå’Œå®ƒäº§ç”Ÿçš„ç”Ÿæˆæ—¶é’Ÿä¹‹é—´éƒ½å±äºåŒæ­¥æ—¶é’Ÿå…³ç³»ï¼Œé™¤éæ‰¾ä¸åˆ°æœ€å°å…¬å…±å‘¨æœŸã€‚ å±äºåŒæ­¥æ—¶é’Ÿå…³ç³»çš„ä¸¤ä¸ªæ—¶é’Ÿä¹‹é—´çš„è·¯å¾„æ˜¯å¯ä»¥è¿›è¡Œæ—¶åºåˆ†æçš„ã€‚

**â‘¡ å¼‚æ­¥æ—¶é’Ÿï¼ˆ asynchronous clock ï¼‰**

ä¸¤ä¸ªæ—¶é’Ÿä¹‹é—´çš„ç›¸å¯¹ç›¸ä½å…³ç³»ä¸ç¡®å®šã€‚æ¯”å¦‚FPGAä¸Šä¸¤ä¸ªæ™¶æŒ¯åˆ†åˆ«äº§ç”Ÿä¸¤ä¸ªPrimary clockï¼ˆç›¸å¯¹ç›¸ä½å…³ç³»ä¸å›ºå®šï¼‰ï¼Œè¿™ä¸¤ä¸ªPrimary clockåˆ†åˆ«ä»FPGAçš„ä¸¤ä¸ªå…¨å±€æ—¶é’Ÿå¼•è„šè¾“å…¥ç»™ä¸¤ä¸ªMMCMï¼Œç”±ä¸¤ä¸ªMMCMåˆ†åˆ«äº§ç”Ÿçš„ç”Ÿæˆæ—¶é’Ÿä¹‹é—´å±äºå¼‚æ­¥æ—¶é’Ÿã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸åŒçš„Primary clockä¹‹é—´éƒ½å±äºå¼‚æ­¥æ—¶é’Ÿï¼Œè¿™äº›Primary clockåˆ†åˆ«äº§ç”Ÿçš„ç”Ÿæˆæ—¶é’Ÿä¹‹é—´ä¹Ÿå±äºå¼‚æ­¥æ—¶é’Ÿå…³ç³»ã€‚ **å±äºå¼‚æ­¥æ—¶é’Ÿå…³ç³»çš„ä¸¤ä¸ªæ—¶é’Ÿä¹‹é—´çš„è·¯å¾„æ— æ³•è¿›è¡Œæ­£ç¡®çš„æ—¶åºåˆ†æã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ·ä¸é€šè¿‡æ—¶é’Ÿåˆ†ç»„å¯¹æ—¶é’Ÿä¹‹é—´çš„å…³ç³»è¿›è¡Œçº¦æŸï¼Œæ—¶åºå¼•æ“ä¼šé»˜è®¤æ‰€æœ‰çš„æ—¶é’Ÿä¹‹é—´éƒ½å±äºåŒæ­¥æ—¶é’Ÿå…³ç³»ã€‚

**â‘¢ ä¸å¯æ‰©å®½çš„æ—¶é’Ÿï¼ˆunexpandable clockï¼‰**

å¯¹äºè¿™ç±»æ—¶é’Ÿï¼Œæ—¶åºå¼•æ“æ— æ³•åœ¨1000ä¸ªæ—¶é’Ÿå‘¨æœŸå†…æ‰¾åˆ°ä¸¤ä¸ªæ—¶é’Ÿçš„å…¬å…±å‘¨æœŸï¼Œæ—¶åºå¼•æ“å°±ä¼šä»è¿™1000ä¸ªæ—¶é’Ÿå‘¨æœŸä¸­æ‰¾åˆ°å»ºç«‹æ—¶é—´éœ€æ±‚æœ€å·®çš„æƒ…å†µï¼Œå¹¶è¿›è¡Œæ—¶åºåˆ†æï¼Œç„¶è€Œå®ƒä¸ä¸€å®šFPGAå®é™…å…è®¸è¿‡ç¨‹ä¸­å»ºç«‹æ—¶é—´éœ€æ±‚æœ€å·®çš„æƒ…å†µï¼Œå› ä¸ºåœ¨1000ä¸ªæ—¶é’Ÿå‘¨æœŸå¤–å¯èƒ½è¿˜ä¼šæœ‰å»ºç«‹æ—¶é—´éœ€æ±‚æ›´å·®çš„æƒ…å†µï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ—¶åºå¼•æ“çš„åˆ†æç»“æœå°±æ— æ³•ä¿è¯è¯¥è·¯å¾„ä¸€å®šä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥æ—¶åºå¼•æ“çš„åˆ†æç»“æœä¹Ÿå°±å˜çš„æ— æ„ä¹‰ã€‚æ¯”å¦‚è¯´ç”±åŒä¸€ä¸ªPrimary Clocké©±åŠ¨çš„ä¸¤ä¸ªMMCMçš„ç”Ÿæˆæ—¶é’Ÿåˆ†åˆ«æ˜¯clk0ï¼ˆ5.125nsï¼‰å’Œclk1ï¼ˆ6.666nsï¼‰ï¼Œè™½ç„¶å®ƒä»¬çš„ç›¸å¯¹ç›¸ä½å…³ç³»æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯æ—¶åºå¼•æ“æ— æ³•ä¿è¯å¯¹ä¸¤ä¸ªæ—¶é’Ÿä¹‹é—´è·¯å¾„çš„åˆ†æå±äºæœ€å·®æƒ…å†µï¼Œè¿™ç§æƒ…å†µå’Œå¼‚æ­¥æ—¶é’Ÿä¹‹é—´çš„æ—¶åºåˆ†æç±»ä¼¼ï¼Œæ—¶åºåˆ†æçš„ç»“æœéƒ½çœ‹èµ·æ¥æ­£å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªç»“æœç¡®æ˜¯ä¸å¯ä¿¡çš„ã€‚æ‰€ä»¥å¯¹è¿™ç§æ—¶é’Ÿçš„å¤„ç†æ–¹å¼ä¸å¤„ç†å¼‚æ­¥æ—¶é’Ÿæ˜¯ç›¸åŒçš„ï¼Œç”¨æˆ·éƒ½éœ€è¦è¿›è¡Œè·¨æ—¶é’ŸåŸŸçš„æ“ä½œã€‚

æ€»ç»“ï¼šå¼‚æ­¥æ—¶é’Ÿå’Œä¸å¯æ‰©å±•çš„æ—¶é’Ÿä¹‹é—´çš„è·¯å¾„éƒ½æ— æ³•è¿›è¡Œæ­£ç¡®çš„æ—¶åºåˆ†æï¼Œæ‰€ä»¥åœ¨æ—¶åºåˆ†æä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨set_clock_groupå¯¹æ—¶é’Ÿè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œå°†è¿™äº›æ— æ³•è¿›è¡Œæ­£ç¡®æ—¶åºåˆ†æçš„è·¯å¾„å¿½ç•¥æ‰ã€‚

## 6.3 æ—¶é’Ÿåˆ†ç»„å®ä¾‹

- ç¬¬ä¸€ä¸ªPrimary clock clk0ä»FPGAçš„å…¨å±€æ—¶é’Ÿå¼•è„šè¿›å…¥äº†ä¸€ä¸ªMMCMï¼ŒMMCMç”Ÿæˆäº†ä¸¤ä¸ªç”Ÿæˆæ—¶é’Ÿuserclkï¼Œitfclk 

- ç¬¬äºŒä¸ªPrimary clock clk1æ˜¯ä¸€ä¸ªé«˜é€Ÿæ”¶å‘å™¨è¾“å‡ºçš„æ¢å¤æ—¶é’Ÿï¼Œå°†è¯¥æ¢å¤æ—¶é’Ÿè¾“å…¥è¿›ä¸€ä¸ªMMCMï¼ŒMMCMç”Ÿæˆäº†ä¸¤ä¸ªç”Ÿæˆæ—¶é’Ÿgtxclkrxï¼Œ gtxclktx

![](https://upload-images.jianshu.io/upload_images/16278820-1f954fc1fb3dde3b.png)

![æ—¶é’Ÿçº¦æŸåæ—¶åºå¼•æ“å¦‚ä½•è¿›è¡Œç¬¬äºŒç§è·¯å¾„æ—¶åºåˆ†æ
](https://upload-images.jianshu.io/upload_images/16278820-9654b0ff7cdbb0d8.png)

![æ—¶é’Ÿçº¦æŸåæ—¶åºå¼•æ“å¦‚ä½•è¿›è¡Œç¬¬äºŒç§è·¯å¾„æ—¶åºåˆ†æ](https://upload-images.jianshu.io/upload_images/16278820-77875c77e74692ae.jpg)

# 7. Inputå»¶æ—¶çº¦æŸ/Outputå»¶æ—¶çº¦æŸ

## 7.1 ä»€ä¹ˆæ˜¯Input delayï¼Ÿå¦‚ä½•è®¡ç®—å®ƒï¼Ÿå¦‚ä½•çº¦æŸå®ƒï¼Ÿ

Input delayæ¦‚å¿µ

![](https://upload-images.jianshu.io/upload_images/16278820-b6bc11c1b69243bd.png)

Input delayè®¡ç®—

![](https://upload-images.jianshu.io/upload_images/16278820-aac7ce8fb293a7eb.png)

Max Input Delay = Tco(Max) + Tpcb(Max) - Clk skew(Min)

![](https://upload-images.jianshu.io/upload_images/16278820-cb7b2f909cffd3c4.jpg)

Min Input Delay = Tco(Min) + Tpcb(Min) - Clk skew(Max)

![](https://upload-images.jianshu.io/upload_images/16278820-38ffaf6902b99c46.jpg)

Input delayçº¦æŸ

![](https://upload-images.jianshu.io/upload_images/16278820-cff67ee26f6c71d6.png)

## 7.2 ä»€ä¹ˆæ˜¯Output delayï¼Ÿå¦‚ä½•è®¡ç®—å®ƒï¼Ÿå¦‚ä½•çº¦æŸå®ƒï¼Ÿ

Output delayæ¦‚å¿µ

![](https://upload-images.jianshu.io/upload_images/16278820-34f3cd8ced6a9b49.png)

Output delayè®¡ç®—

![](https://upload-images.jianshu.io/upload_images/16278820-60ba8f3ffb17b921.png)

![](https://upload-images.jianshu.io/upload_images/16278820-4f2c5f5e5c6cb612.png)

Max Output Delay = Tpcb(Max) + Tsu - Clk skew(Min) 

![](https://upload-images.jianshu.io/upload_images/16278820-309aa875840a5aa5.jpg)

Min Output Delay = Tpcb(Min) - Th - Clk skew(Max)

![](https://upload-images.jianshu.io/upload_images/16278820-a2a48dcbff8fd7eb.jpg)

Output delayçº¦æŸ

![](https://upload-images.jianshu.io/upload_images/16278820-483da8ceba92ffb0.png)


# 8. Multicycleçº¦æŸ

## 8.1 ä¸ºä»€ä¹ˆè¦è¿›è¡ŒMulticycleçº¦æŸï¼Ÿ

æ—¶åºå¼•æ“é»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨å»ºç«‹æ—¶é—´éœ€æ±‚/ä¿æŒæ—¶é—´éœ€æ±‚æœ€å·®çš„æƒ…å†µä¸‹è¿›è¡Œæ—¶åºåˆ†æï¼Œè€Œæ—¶åºå¼•æ“é€‰æ‹©çš„è¿™ç§éœ€æ±‚ä¸ä¸€å®šæ˜¯ç”¨æˆ·çœŸæ­£å¸Œæœ›çš„ï¼Œè€Œä¸”æ—¶åºå¼•æ“é»˜è®¤é€‰æ‹©çš„è¿™ç§éœ€æ±‚æ˜¯éå¸¸ä¸¥è‹›çš„ï¼Œç”šè‡³æ˜¯æ ¹æœ¬æ— æ³•æ»¡è¶³çš„ã€‚æ­¤æ—¶å°±éœ€è¦ç”¨æˆ·è¿›è¡ŒMulticycleçº¦æŸï¼Œæ‰‹åŠ¨ä¿®æ”¹å»ºç«‹æ—¶é—´éœ€æ±‚/ä¿æŒæ—¶é—´éœ€æ±‚ã€‚ç”¨æˆ·å¸Œæœ›æ”¾æ¾æŸäº›è·¯å¾„çš„çº¦æŸåŠ›åº¦ï¼Œå°±å¯ä»¥é€šè¿‡Multicycleçº¦æŸè°ƒæ•´å»ºç«‹æ—¶é—´éœ€æ±‚/ä¿æŒæ—¶é—´éœ€æ±‚ã€‚ 

ä½¿ç”¨set_multicycle_pathå‘½ä»¤è¿›è¡Œçº¦æŸ

![](https://upload-images.jianshu.io/upload_images/16278820-3b5a901b2cd876cf.png)

![](https://upload-images.jianshu.io/upload_images/16278820-0cadf310522eef3c.png)

## 8.2 å¦‚ä½•è¿›è¡Œæ­£ç¡®Multicycleçº¦æŸï¼Ÿ

æ³¨ï¼šä½¿ç”¨set_multicycle_pathå‘½ä»¤

**â‘  åœ¨æºæ—¶é’Ÿå’Œç›®çš„æ—¶é’Ÿç›¸åŒçš„æƒ…å†µä¸‹è¿›è¡ŒMulticycleçº¦æŸ**

![](https://upload-images.jianshu.io/upload_images/16278820-7f30bc889a4fb263.png)

![](https://upload-images.jianshu.io/upload_images/16278820-1710765b9614fa27.png)

- æ¯ä¸¤ä¸ªæ—¶é’Ÿå‘èµ·ä¸€æ¬¡æ•°æ®ï¼Œæ¯ä¸¤ä¸ªæ—¶é’Ÿæ•è·ä¸€æ¬¡æ•°æ®

![](https://upload-images.jianshu.io/upload_images/16278820-cfb211c7f6a929e5.png)

![](https://upload-images.jianshu.io/upload_images/16278820-cdb25582831e9ed9.png)

![](https://upload-images.jianshu.io/upload_images/16278820-f553b5f33942bb39.png)

![](https://upload-images.jianshu.io/upload_images/16278820-7f318953b0364067.png)

![](https://upload-images.jianshu.io/upload_images/16278820-007564a571009512.png)

- æ¯å››ä¸ªæ—¶é’Ÿå‘èµ·ä¸€æ¬¡æ•°æ®ï¼Œæ¯å››ä¸ªæ—¶é’Ÿæ•è·ä¸€æ¬¡æ•°æ®

![](https://upload-images.jianshu.io/upload_images/16278820-2347a1cbfc4beb7c.png)

- åªè°ƒæ•´setupéœ€æ±‚ï¼ŒHoldupéœ€æ±‚ä¼šå‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œä½†æ˜¯å˜åŒ–ç»“æœæ˜¯é”™è¯¯çš„

![](https://upload-images.jianshu.io/upload_images/16278820-326a043970f869dc.png)

- è¿›ä¸€æ­¥è°ƒæ•´Holdupéœ€æ±‚

![](https://upload-images.jianshu.io/upload_images/16278820-969156b1c302cb97.png)

- Set_multicycle_path 4 â€“ hold â€“end â€“from [get_pins data0_reg/C] â€“ to [get_pins data1_reg/C]

![](https://upload-images.jianshu.io/upload_images/16278820-4b6ae099f697e187.png)

**â‘¡ åœ¨æºæ—¶é’Ÿå’Œç›®çš„æ—¶é’Ÿé¢‘ç‡ç›¸åŒä¸”æœ‰æ­£å‘åç§»çš„æƒ…å†µä¸‹ï¼ˆæ­£å‘åç§»0.3nsï¼‰**

![](https://upload-images.jianshu.io/upload_images/16278820-8db347ea4da11ad8.png)

![](https://upload-images.jianshu.io/upload_images/16278820-26004aa10b7be3b3.png)

å…ˆè°ƒæ•´setupéœ€æ±‚ï¼Œholdupéœ€æ±‚å‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå˜åŒ–çš„ç»“æœæ˜¯æ­£ç¡®çš„

![](https://upload-images.jianshu.io/upload_images/16278820-99e4b0fed00833bc.png)

![](https://upload-images.jianshu.io/upload_images/16278820-d8f20a24f8e7c7f6.png)

**â‘¢ åœ¨æºæ—¶é’Ÿå’Œç›®çš„æ—¶é’Ÿé¢‘ç‡ç›¸åŒä¸”æœ‰è´Ÿå‘åç§»çš„æƒ…å†µä¸‹ï¼ˆè´Ÿå‘åç§»0.3nsï¼‰å‘ç”Ÿè´Ÿå‘åç§»æ—¶ï¼Œé€šå¸¸ä¸éœ€è¦è¿›è¡ŒMulticycleçš„çº¦æŸï¼Œé™¤éè´Ÿå‘åç§»è¿‡å¤§**

![](https://upload-images.jianshu.io/upload_images/16278820-941f7fcbb9cfbe8b.png)

![](https://upload-images.jianshu.io/upload_images/16278820-a073dabdd41f7b4b.png)

**â‘£ åœ¨æºæ—¶é’Ÿå’Œç›®çš„æ—¶é’Ÿé¢‘ç‡ä¸åŒçš„æƒ…å†µä¸‹ï¼ˆæºæ—¶é’Ÿæ…¢ï¼Œç›®çš„æ—¶é’Ÿå¿«ï¼‰**

![](https://upload-images.jianshu.io/upload_images/16278820-7e8ea4f615481260.png)

![](https://upload-images.jianshu.io/upload_images/16278820-38907d8d9e820cb8.png)

è°ƒæ•´setupéœ€æ±‚ï¼ˆåªèƒ½ç”¨-endï¼Œä¸èƒ½ç”¨-start ï¼‰ï¼ŒHoldupéœ€æ±‚å‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå˜åŒ–çš„ç»“æœæ˜¯é”™è¯¯çš„ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-ed8f32d35c8c2849.png)

![](https://upload-images.jianshu.io/upload_images/16278820-c1c41d0117c0dcd5.png)

è¿›ä¸€æ­¥è°ƒæ•´Holdupéœ€æ±‚ã€‚ï¼ˆåªèƒ½ç”¨-endï¼Œä¸èƒ½ç”¨-startï¼‰

![](https://upload-images.jianshu.io/upload_images/16278820-9d19ece5bb435c81.png)

![](https://upload-images.jianshu.io/upload_images/16278820-38f7a2f863bee9b0.png)

**â‘¤ åœ¨æºæ—¶é’Ÿå’Œç›®çš„æ—¶é’Ÿé¢‘ç‡ä¸åŒçš„æƒ…å†µä¸‹ï¼ˆæºæ—¶é’Ÿå¿«ï¼Œç›®çš„æ—¶é’Ÿæ…¢ï¼‰**

![](https://upload-images.jianshu.io/upload_images/16278820-290285ea58fc4aa3.png)

![](https://upload-images.jianshu.io/upload_images/16278820-72b991a08897e233.png)

åŒæ—¶è°ƒæ•´setupéœ€æ±‚ï¼ˆåªèƒ½ç”¨-startï¼Œä¸èƒ½ç”¨-endï¼‰å’ŒHoldupéœ€æ±‚ï¼ˆåªèƒ½ç”¨-startï¼Œä¸èƒ½ç”¨-endï¼‰

![](https://upload-images.jianshu.io/upload_images/16278820-74d5e32df61af6ec.png)

![](https://upload-images.jianshu.io/upload_images/16278820-a960f569cb93cdea.png)

# 9. Falsepathçº¦æŸ

## 9.1 ä»€ä¹ˆæ ·çš„è·¯å¾„å±äºFalsePathï¼Ÿ

æ³¨ï¼šä½¿ç”¨`set_false_path`å‘½ä»¤FalsePathè·¯å¾„æ˜¯æŒ‡è¯¥è·¯å¾„åœ¨æ‹“æ‰‘ç»“æ„ä¸­çš„ç¡®å­˜åœ¨ï¼Œä½†æ˜¯æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶çš„è·¯å¾„ï¼š

- åœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥è·¯å¾„ä¸å·¥ä½œã€‚

- è¯¥è·¯å¾„ä¸éœ€è¦è¿›è¡Œæ—¶åºåˆ†æã€‚

æ¯”å¦‚ï¼šå·²ç»åšäº†ä¸¤çº§è§¦å‘å™¨åŒæ­¥çš„è·¨æ—¶é’ŸåŸŸè·¯å¾„ åªåœ¨ä¸Šç”µæ—¶å·¥ä½œä¸€æ¬¡çš„å¯„å­˜å™¨å¼‚æ­¥å¤ä½è·¯å¾„æˆ–ç”¨äºæµ‹è¯•çš„è·¯å¾„æ³¨æ„ï¼šå¦‚æœç”¨æˆ·çš„ç›®çš„åªæ˜¯æ”¾æ¾æŸæ¡è·¯å¾„çš„æ—¶åºçº¦æŸï¼Œå¯ä»¥ç”¨`set_multicycle_path`å‘½ä»¤è¿›è¡Œçº¦æŸï¼Œä¸è¦ä½¿ç”¨`set_false_path`ã€‚

è®¾ç½®FalsePathçš„å¥½å¤„ï¼š

- å‡å°ç»¼åˆ/å®ç°/æ—¶åºåˆ†æçš„æ—¶é—´ã€‚

-  æå¤§çš„æå‡å·¥å…·å¯¹è®¾è®¡çš„ç»¼åˆ/å®ç°/ä¼˜åŒ–çš„ç»“æœã€‚-from/-toçš„node_listå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ—¶åºè·¯å¾„çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæˆ–æ˜¯æ—¶é’Ÿã€‚-throughçš„node_listå¯ä»¥æ˜¯ports/pinsã€‚

```tcl
set_false_path [-setup] [-hold] [-from <node_list>] [-to <node_list>] [-through <node_list>]
```
![](https://upload-images.jianshu.io/upload_images/16278820-61ff8bc414ac60b7.png)

## 9.2 FalsePathçº¦æŸä¸¾ä¾‹

æ³¨ï¼šä½¿ç”¨set_false_pathå‘½ä»¤

**â‘  å°†å¼‚æ­¥å¤ä½ä¿¡å·è®¾ç½®ä¸ºä¼ªè·¯å¾„**

```tcl
set_false_path -from [get_port reset] -to [all_registers]
```

![](https://upload-images.jianshu.io/upload_images/16278820-642c0434a16ec4c0.png)

**â‘¡ å°†CLKAåˆ°CLKBçš„å•å‘è·¯å¾„è®¾ç½®ä¸ºä¼ªè·¯å¾„ **

```tcl
set_false_path -from [get_clocks CLKA] -to [get_clocks CLKB]
```

![](https://upload-images.jianshu.io/upload_images/16278820-18b6fb3ceb4afdbd.png)

**â‘¢ å°†CLKAåˆ°CLKBä»¥åŠCLKBåˆ°CLKAçš„åŒå‘è·¯å¾„è®¾ç½®ä¸ºä¼ªè·¯å¾„ **

```tcl
set_false_path -from [get_clocks CLKA] -to [get_clocks CLKB]
set_false_path -from [get_clocks CLKB] -to [get_clocks CLKA]
```

![](https://upload-images.jianshu.io/upload_images/16278820-bcdc9410a6bc9031.png)

æ³¨ï¼šå½“æœ‰å¤šä¸ªå¼‚æ­¥æ—¶é’Ÿä¹‹é—´çš„è·¯å¾„éœ€è¦è®¾ç½®ä¸ºä¼ªè·¯å¾„æ—¶ï¼Œæ¨èä½¿ç”¨set_clock_groupå‘½ä»¤ã€‚

![](https://upload-images.jianshu.io/upload_images/16278820-d1025be24cdf1858.png)

```tcl
set_false_path -through [get_pins MUX1/a0] -through [get_pins MUX2/a1]
```

![](https://upload-images.jianshu.io/upload_images/16278820-e570c6b69dcc0bde.png)

å‡¡æ˜¯ç»è¿‡`MUX1/a0`ï¼Œåˆ°`MUX2/a1`çš„æ—¶åºè·¯å¾„éƒ½ä¼šè¢«å¿½ç•¥ï¼Œé‡‡ç”¨`-through`çš„å¥½å¤„æ˜¯ä¸éœ€è¦å…·ä½“æŒ‡å®šæ—¶åºè·¯å¾„çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œ`-through`çš„é¡ºåºéœ€è¦æ³¨æ„ï¼Œä¸Šè¿°å‘½ä»¤æè¿°çš„æ˜¯å…ˆç»è¿‡`MUX1/a0`ï¼Œç„¶åå†ç»è¿‡`MUX2/a1`ã€‚
